import*as e from"react";import n,{useLayoutEffect as t,useEffect as r,useContext as o,useMemo as u,useRef as c,useCallback as i,useState as l,createContext as a,forwardRef as f}from"react";import{getOverflowAncestors as s,useFloating as d}from"@floating-ui/react-dom";export*from"@floating-ui/react-dom";import v from"point-in-polygon";import{createPortal as m}from"react-dom";import{hideOthers as g}from"aria-hidden";var p="undefined"!=typeof document?t:r;function h(){const e=new Map;return{emit(n,t){var r;null==(r=e.get(n))||r.forEach((e=>e(t)))},on(n,t){e.set(n,[...e.get(n)||[],t])},off(n,t){e.set(n,(e.get(n)||[]).filter((e=>e!==t)))}}}let y=!1,w=0;const b=()=>"floating-ui-"+w++;const E=e["useId".toString()],x=null!=E?E:function(){const[n,t]=e.useState((()=>y?b():void 0));return p((()=>{null==n&&t(b())}),[]),e.useEffect((()=>{y||(y=!0)}),[]),n},L=a(null),I=a(null),T=()=>{var e,n;return null!=(e=null==(n=o(L))?void 0:n.id)?e:null},A=()=>o(I),k=()=>{const e=x(),n=A(),t=T();return p((()=>{const r={id:e,parentId:t};return null==n||n.addNode(r),()=>{null==n||n.removeNode(r)}}),[n,e,t]),e},O=e=>{let{children:t,id:r}=e;const o=T();return n.createElement(L.Provider,{value:u((()=>({id:r,parentId:o})),[r,o])},t)},C=e=>{let{children:t}=e;const r=c([]),o=i((e=>{r.current=[...r.current,e]}),[]),a=i((e=>{r.current=r.current.filter((n=>n!==e))}),[]),f=l((()=>h()))[0];return n.createElement(I.Provider,{value:u((()=>({nodesRef:r,addNode:o,removeNode:a,events:f})),[r,o,a,f])},t)};function R(e){return Object.entries(null!=e?e:{}).reduce(((e,n)=>{let[t,r]=n;return e[t]=[r],e}),{})}function D(e,n,t){const r={reference:"reference"===t?R(e):{},floating:"floating"===t?R(e):{},item:"item"===t?R(e):{}};return n.forEach((e=>{var n;const o=null!=(n=e&&e[t])?n:{};Object.keys(o).forEach((e=>{var n;"function"==typeof o[e]&&(null==r[t][e]&&(r[t][e]=[]),null==(n=r[t][e])||n.push(o[e]))}))})),{..."floating"===t&&{tabIndex:-1},...e,...n.reduce(((e,n)=>(n&&Object.assign(e,n[t]),e)),{}),...Object.entries(r[t]).reduce(((e,n)=>{let[t,r]=n;return 0===t.indexOf("on")&&(e[t]=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];r.forEach((e=>e(...n)))}),e}),{})}}const P=function(e){return void 0===e&&(e=[]),{getReferenceProps:n=>D(n,e,"reference"),getFloatingProps:n=>D(n,e,"floating"),getItemProps:n=>D(n,e,"item")}};function M(e){var n;return null!=(n=null==e?void 0:e.ownerDocument)?n:document}function j(e){var n;return null!=(n=M(e).defaultView)?n:window}function N(e){return!!e&&e instanceof j(e).Element}function S(e){return!!e&&e instanceof j(e).HTMLElement}function B(e,n){var t;let r=null!=(t=null==e?void 0:e.nodesRef.current.filter((e=>{var t;return e.parentId===n&&(null==(t=e.context)?void 0:t.open)})))?t:[],o=r;for(;o.length;){var u;o=null!=(u=null==e?void 0:e.nodesRef.current.filter((e=>{var n;return null==(n=o)?void 0:n.some((n=>{var t;return e.parentId===n.id&&(null==(t=e.context)?void 0:t.open)}))})))?u:[],r=r.concat(o)}return r}function K(e){let n,{timeout:t=0,debug:r=null}=void 0===e?{}:e;return e=>{let{x:o,y:u,placement:c,refs:i,onClose:l,nodeId:a,tree:f}=e;return function(e){var s;if("touch"===e.pointerType)return;const{target:d,clientX:m,clientY:g}=e,p=d;if("pointermove"===e.type&&N(i.reference.current)&&i.reference.current.contains(p)||null!=(s=i.floating.current)&&s.contains(p))return;if(f&&B(f,a).some((e=>{let{context:n}=e;return null==n?void 0:n.open})))return;if(!i.reference.current||!i.floating.current||null==c||null==o||null==u)return;const h=i.reference.current.getBoundingClientRect(),y=i.floating.current.getBoundingClientRect(),w=c.split("-")[0],b=o>y.right-y.width/2,E=u>y.bottom-y.height/2;switch(w){case"top":if(m>=y.left&&m<=y.right&&g>=y.bottom&&g<=h.top)return;break;case"bottom":if(m>=y.left&&m<=y.right&&g>=h.bottom&&g<=y.top)return;break;case"left":if(m>=y.right&&m<=h.left&&g>=y.left&&g<=y.right)return;break;case"right":if(m>=y.right&&m<=h.left&&g>=y.right&&g<=h.left)return}function x(e){let[n,t]=e;const r=y.width>h.width,o=y.height>h.height;switch(w){case"top":{const e=[r?n:b?n+1:n-1,t+1],o=[r?n:b?n-1:n+1,t+1],u=[[y.left,b||r?y.bottom-1:y.top],[y.right,b?r?y.bottom-1:y.top:y.bottom-1]];return b?[e,o,...u]:[e,...u,o]}case"bottom":{const e=[r?n:b?n+1:n-1,t-1],o=[r?n:b?n-1:n+1,t-1],u=[[y.left,b||r?y.top+1:y.bottom],[y.right,b?r?y.top+1:y.bottom:y.top+1]];return b?[e,o,...u]:[e,...u,o]}case"left":{const e=[n+1,o?t:E?t-1:t+1],r=[n+1,o?t:E?t+1:t-1],u=[[E||o?y.right-1:y.left,y.top],[E?o?y.right-1:y.left:y.right-1,y.bottom]];return E?[e,...u,r]:[...u,e,r]}case"right":{const e=[n-1,o?t:E?t+1:t-1],r=[n-1,o?t:E?t-1:t+1],u=[[E||o?y.left+1:y.right,y.top],[E?o?y.left+1:y.right:y.left+1,y.bottom]];return E?[e,r,...u]:[e,...u,r]}}}const L=x([o,u]);"production"!==process.env.NODE_ENV&&(null==r||r(x([o,u]).slice(0,4).join(", "))),v([m,g],L)?t&&(n=setTimeout(l,t)):(clearTimeout(n),l())}}}const F="floating-ui-root",V=e=>{let{children:n,id:t=F}=e;const[r,o]=l(!1),u=c(null);return p((()=>{const e=document.getElementById(t);e?u.current=e:(u.current=document.createElement("div"),u.current.id=t);const n=u.current;document.body.contains(n)||document.body.appendChild(n),o(!0)}),[t]),r&&u.current?m(n,u.current):null};function H(){return H=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},H.apply(this,arguments)}const U="data-floating-ui-scroll-lock",X=f((function(e,t){let{lockScroll:r=!1,...o}=e;return p((()=>{if(!r)return;const e=window.pageXOffset,n=window.pageYOffset,t=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth;return document.body.hasAttribute(U)?void 0:(Object.assign(document.body.style,{position:"fixed",overflow:"hidden",top:"-"+n+"px",left:"-"+e+"px",right:"0",[t]:o+"px"}),document.body.setAttribute(U,""),()=>{Object.assign(document.body.style,{position:"",overflow:"",top:"",left:"",right:"",[t]:""}),document.body.removeAttribute(U),window.scrollTo(e,n)})}),[r]),n.createElement("div",H({ref:t},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))}));function Y(e){const n=c(e);return p((()=>{n.current=e})),n}function q(e,n,t){return t&&"mouse"!==t?0:"number"==typeof e?e:null==e?void 0:e[n]}const W=function(e,n){let{enabled:t=!0,delay:o=0,handleClose:u=null,mouseOnly:l=!1,restMs:a=0}=void 0===n?{}:n;const{open:f,onOpenChange:s,dataRef:d,events:v,refs:m}=e,g=A(),h=Y(s),y=Y(u),w=c(),b=c(),E=c(),x=c(),L=c(!0);p((()=>{t&&(f||(w.current=void 0))})),r((()=>{if(t)return v.on("dismiss",e),()=>{v.off("dismiss",e)};function e(){clearTimeout(b.current),clearTimeout(x.current),L.current=!0}}),[t,v,m.floating]),r((()=>{if(!t||!y.current)return;function e(){var e;null!=(e=d.current.openEvent)&&e.type.includes("mouse")&&h.current(!1)}const n=M(m.floating.current).documentElement;return n.addEventListener("mouseleave",e),()=>{n.removeEventListener("mouseleave",e)}}),[m.floating,h,t,y,d]);const I=i((function(e){void 0===e&&(e=!0),o?(clearTimeout(b.current),b.current=setTimeout((()=>h.current(!1)),q(o,"close",w.current))):e&&h.current(!1)}),[o,h]);if(r((()=>{!f&&t&&E.current&&M(m.floating.current).removeEventListener("pointermove",E.current)}),[f,t,m.floating]),r((()=>{if(!t)return;function n(e){clearTimeout(b.current),f||l&&"mouse"!==w.current||(L.current=!1,d.current.openEvent=e,o?b.current=setTimeout((()=>{h.current(!0)}),q(o,"open",w.current)):h.current(!0))}function r(n){var t,r;if("click"===(null==(t=d.current.openEvent)?void 0:t.type)||"pointerdown"===(null==(r=d.current.openEvent)?void 0:r.type))return;const o=M(m.floating.current);if(clearTimeout(x.current),y.current)return clearTimeout(b.current),E.current&&o.removeEventListener("pointermove",E.current),E.current=y.current({...e,tree:g,x:n.clientX,y:n.clientY,onClose:I}),void o.addEventListener("pointermove",E.current);I()}const u=m.reference.current;return N(u)?(u.addEventListener("mouseenter",n),u.addEventListener("mouseleave",r),()=>{u.removeEventListener("mouseenter",n),u.removeEventListener("mouseleave",r)}):void 0}),[t,I,e,o,y,d,l,h,f,g,m.reference,m.floating]),!t)return{};function T(e){w.current=e.pointerType}return{reference:{onPointerDown:T,onPointerEnter:T,onMouseMove(){f||0===a||(clearTimeout(x.current),x.current=setTimeout((()=>{L.current||s(!0)}),a))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave:()=>I(!1)}}},z=a({delay:1e3,initialDelay:1e3,currentId:null,setCurrentId:()=>{},setState:()=>{}}),_=()=>o(z),G=e=>{let{children:t,delay:r}=e;const[o,c]=l({delay:r,initialDelay:r,currentId:null}),a=i((e=>{c((n=>({...n,currentId:e})))}),[]);return n.createElement(z.Provider,{value:u((()=>({...o,setState:c,setCurrentId:a})),[o,c,a])},t)},J=(e,n)=>{let{open:t,onOpenChange:o}=e,{id:u}=n;const{currentId:c,initialDelay:i,setState:l}=_();r((()=>{c&&o&&(l((e=>({...e,delay:{open:0,close:q(i,"close")}}))),c!==u&&o(!1))}),[u,o,l,c,i]),r((()=>{!t&&c===u&&o&&(o(!1),l((e=>({...e,delay:i,currentId:null}))))}),[t,l,c,u,o,i])},Q=function(e,n){let{open:t}=e,{enabled:r=!0,role:o="dialog"}=void 0===n?{}:n;const u=x(),c=x(),i={id:u,role:o};return r?"tooltip"===o?{reference:{"aria-describedby":t?u:void 0},floating:i}:{reference:{"aria-expanded":t?"true":"false","aria-haspopup":o,"aria-controls":t?u:void 0,..."listbox"===o&&{role:"combobox"},..."menu"===o&&{id:c}},floating:{...i,..."menu"===o&&{"aria-labelledby":c}}}:{}},Z=function(e,n){let{open:t,onOpenChange:r,dataRef:o}=e,{enabled:u=!0,pointerDown:i=!1}=void 0===n?{}:n;const l=c();return u?{reference:{...i&&{onPointerDown(e){var n;(l.current=e.pointerType,t)?"pointerdown"===(null==(n=o.current.openEvent)?void 0:n.type)&&r(!1):r(!0);o.current.openEvent=e.nativeEvent}},onClick(e){if(i&&l.current)l.current=void 0;else{var n;if(t)"click"===(null==(n=o.current.openEvent)?void 0:n.type)&&r(!1);else r(!0);o.current.openEvent=e.nativeEvent}}}}:{}},$=function(e,n){let{open:t,onOpenChange:o,refs:u,events:c,nodeId:l}=e,{enabled:a=!0,escapeKey:f=!0,outsidePointerDown:d=!0,referencePointerDown:v=!1,ancestorScroll:m=!1,bubbles:g=!0}=void 0===n?{}:n;const p=A(),h=Y(o),y=i((()=>{var e;return null==(e=u.floating.current)?void 0:e.contains(M(u.floating.current).activeElement)}),[u.floating]),w=i((()=>{S(u.reference.current)&&u.reference.current.focus()}),[u.reference]);return r((()=>{if(!t||!a)return;function e(e){if("Escape"===e.key){if(!g&&!y())return;c.emit("dismiss"),h.current(!1),w()}}function n(e){var n;const t=p&&B(p,l).some((n=>{var t,r;return null==(t=n.context)||null==(r=t.refs.floating.current)?void 0:r.contains(e.target)}));null!=(n=u.floating.current)&&n.contains(e.target)||N(u.reference.current)&&u.reference.current.contains(e.target)||t||(g||y())&&(c.emit("dismiss"),h.current(!1),w())}function r(){h.current(!1)}const o=M(u.floating.current);f&&o.addEventListener("keydown",e),d&&o.addEventListener("mousedown",n);const i=(m?[...N(u.reference.current)?s(u.reference.current):[],...N(u.floating.current)?s(u.floating.current):[]]:[]).filter((e=>{var n;return e!==(null==(n=o.defaultView)?void 0:n.visualViewport)}));return i.forEach((e=>e.addEventListener("scroll",r,{passive:!0}))),()=>{f&&o.removeEventListener("keydown",e),d&&o.removeEventListener("mousedown",n),i.forEach((e=>e.removeEventListener("scroll",r)))}}),[f,d,c,p,l,t,h,w,m,a,g,y,u.floating,u.reference]),a?{reference:{onPointerDown(){v&&(c.emit("dismiss"),o(!1))}}}:{}},ee=function(e,n){let{open:t,onOpenChange:o,dataRef:u,refs:i,events:l}=e,{enabled:a=!0,keyboardOnly:f=!0}=void 0===n?{}:n;const s=c(!1);return r((()=>{var e;if(!a)return;const n=null!=(e=M(i.floating.current).defaultView)?e:window;function r(){s.current=!t}function o(){setTimeout((()=>{s.current=!1}))}return n.addEventListener("focus",o),n.addEventListener("blur",r),()=>{n.removeEventListener("focus",o),n.removeEventListener("blur",r)}}),[i.floating,t,a]),r((()=>{if(a)return l.on("dismiss",e),()=>{l.off("dismiss",e)};function e(){s.current=!0}}),[l,a]),a?{reference:{onPointerDown(e){let{pointerType:n}=e;s.current=!(!n||!f)},onFocus(e){var n,t,r;s.current||"focus"===e.type&&"mousedown"===(null==(n=u.current.openEvent)?void 0:n.type)&&N(i.reference.current)&&null!=(t=i.reference.current)&&t.contains(null==(r=u.current.openEvent)?void 0:r.target)||(u.current.openEvent=e.nativeEvent,o(!0))},onBlur(e){var n;const t=e.relatedTarget;null!=(n=i.floating.current)&&n.contains(t)||N(i.reference.current)&&i.reference.current.contains(t)||(s.current=!1,o(!1))}}}:{}};function ne(e){e.preventDefault(),e.stopPropagation()}const te=["content"];function re(e){requestAnimationFrame((()=>{null==e||e.focus()}))}const oe=function(e,n){let{open:t,onOpenChange:o,refs:u}=e,{enabled:l=!0,initialContentFocus:a=0,order:f=te,modal:s=!0,inert:d=!1}=void 0===n?{}:n;const v=c(!1),m=c(null),h=c(null),y=Y(s),w=Y(f),b=i((()=>w.current.map((e=>{return S(u.reference.current)&&"reference"===e?u.reference.current:u.floating.current&&"floating"===e?u.floating.current:"content"===e?Array.from(null!=(n=null==(t=u.floating.current)?void 0:t.querySelectorAll("a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,*[tabindex],*[contenteditable]"))?n:[]):null;var n,t})).filter(Boolean).flat()),[u.floating,u.reference]);function E(e){var n;const t=e.relatedTarget;null!=(n=u.floating.current)&&n.contains(t)||!N(u.reference.current)||u.reference.current.contains(t)||o(!1)}return p((()=>{const e=u.floating.current;if(!(l&&t&&e&&s))return;function n(){const n=M(e).createElement("div");return n.tabIndex=0,Object.assign(n.style,{position:"fixed",outline:"0",pointerEvents:"none"}),n.setAttribute("aria-hidden","true"),n}m.current||(m.current=n()),h.current||(h.current=n());const r=m.current,o=h.current;function c(e){var n;ne(e);const t=b();null==(n=t[e.target===o?0:t.length-1])||n.focus()}return e.insertAdjacentElement("beforebegin",r),e.insertAdjacentElement("afterend",o),r.addEventListener("focus",c),o.addEventListener("focus",c),()=>{var e,n;r.removeEventListener("focus",c),o.removeEventListener("focus",c),null!=(e=r.parentNode)&&e.contains(r)&&r.parentNode.removeChild(r),null!=(n=o.parentNode)&&n.contains(o)&&o.parentNode.removeChild(o)}}),[l,t,s,d,b,u.floating]),r((()=>{if(!l||!t||!d)return;function e(e){"Tab"===e.key&&ne(e)}const n=M(u.floating.current);return n.addEventListener("keydown",e),()=>{n.removeEventListener("keydown",e)}}),[l,t,d,u.floating]),r((()=>{if(!l)return;const e=b();if(d){if(t){const n=e[0];n!==u.floating.current||n.contains(n.ownerDocument.activeElement)||re(n)}}else t&&("number"==typeof a?re(e[a]):a.current&&re(e.find((e=>e===a.current))))}),[b,t,d,s,a,l,u.reference,u.floating]),r((()=>{l&&!d&&!t&&y.current&&v.current&&S(u.reference.current)&&re(u.reference.current)}),[t,l,d,y,u.reference]),r((()=>{if(t&&s&&l&&u.floating.current)return g(u.floating.current)}),[t,s,l,u.floating]),r((()=>(v.current=!0,()=>{v.current=!1})),[]),l?s?{floating:{"aria-modal":"true"}}:{reference:{onBlur:E},floating:{onBlur:E}}:{}};function ue(e,n){let{startingIndex:t=-1,decrement:r=!1}=void 0===n?{}:n;const o=se(e);let u=t;do{var c,i;u+=r?-1:1}while(null!=(c=o[u])&&c.hasAttribute("disabled")||"true"===(null==(i=o[u])?void 0:i.getAttribute("aria-disabled")));return-1===u?0:u}function ce(e,n,t){switch(e){case"vertical":return n;case"horizontal":return t;default:return n||t}}function ie(e,n){return ce(n,"ArrowUp"===e||"ArrowDown"===e,"ArrowLeft"===e||"ArrowRight"===e)}function le(e,n,t){return ce(n,"ArrowDown"===e,t?"ArrowLeft"===e:"ArrowRight"===e)}function ae(e){return ue(e)}function fe(e){return ue(e,{decrement:!0,startingIndex:se(e).length})}function se(e){return e.current.filter((e=>null!=e))}const de=function(e,n){let{open:t,onOpenChange:r,refs:o}=e,{listRef:u,activeIndex:a,onNavigate:f,enabled:s=!0,selectedIndex:d=null,loop:v=!1,nested:m=!1,rtl:g=!1,virtual:h=!1,focusItemOnOpen:y="auto",focusItemOnHover:w=!0,orientation:b="vertical"}=void 0===n?{listRef:{current:[]},activeIndex:null,onNavigate:()=>{}}:n;const E=T(),x=A(),L=c(y),I=c(null!=d?d:-1),k=c(""),O=c(!1),C=Y(f),R=c(!1),[D,P]=l(),M=i(((e,n)=>{var t,r;h?P(null==(t=se(e)[n.current])?void 0:t.id):null==(r=se(e)[n.current])||r.focus({preventScroll:!0})}),[h]);function j(e){"auto"===y&&(L.current=!e.pointerType)}function N(e){if(R.current=!0,m&&function(e,n,t){return ce(n,t?"ArrowRight"===e:"ArrowLeft"===e,"ArrowUp"===e)}(e.key,b,g))return ne(e),r(!1),void(S(o.reference.current)&&o.reference.current.focus());const n=I.current,t=ae(u),c=fe(u);if("Home"===e.key&&(I.current=t,f(I.current)),"End"===e.key&&(I.current=c,f(I.current)),ie(e.key,b)){if(ne(e),!h&&e.currentTarget.ownerDocument.activeElement===e.currentTarget)return I.current=null!=d?d:le(e.key,b,g)?t:c,void f(I.current);le(e.key,b,g)?I.current=v?n>=c?t:ue(u,{startingIndex:n}):Math.min(c,ue(u,{startingIndex:n})):I.current=v?n<=t?c:ue(u,{startingIndex:n,decrement:!0}):Math.max(t,ue(u,{startingIndex:n,decrement:!0})),f(I.current)}}return p((()=>{s&&(null!=d&&(I.current=d),t&&L.current&&(C.current(I.current),M(u,I)))}),[t,d,u,C,M,s]),p((()=>{s&&t&&(null!=a?(I.current=a,C.current(I.current),M(u,I)):(I.current=-1,M(u,I)))}),[t,a,d,u,C,M,s,E,o.floating,null==x?void 0:x.nodesRef]),p((()=>{null==d&&s&&(t&&(ie(k.current,b)||L.current&&(" "===k.current||"Enter"===k.current))&&(I.current=function(e,n,t){return ce(n,"ArrowUp"===e,t?"ArrowRight"===e:"ArrowLeft"===e)}(k.current,b,g)?fe(u):ae(u),C.current(I.current),M(u,I)),k.current="")}),[t,u,d,C,M,s,b,g]),p((()=>{var e;s&&(!t&&O.current&&null!=d&&(null==(e=o.reference.current)||e.focus()))}),[o.reference,d,t,s]),p((()=>(O.current=!0,()=>{O.current=!1})),[]),p((()=>{var e;s&&(t||("auto"===y&&(L.current=!0),I.current=null!=(e=null!=d?d:a)?e:-1,C.current(null)))}),[t,d,a,s,y,C]),s?{reference:{...h&&t&&{"aria-activedescendant":D},onPointerEnter:j,onPointerDown:j,onKeyDown(e){if(R.current=!0,h&&t)return N(e);"auto"===y&&(L.current=!0),k.current=e.key,m?function(e,n,t){return ce(n,t?"ArrowLeft"===e:"ArrowRight"===e,"ArrowDown"===e)}(e.key,b,g)&&(I.current=ae(u),ne(e),r(!0),f(I.current)):(ie(e.key,b)&&(I.current=null==d?le(e.key,b,g)?ae(u):fe(u):d,ne(e),r(!0),f(I.current)),h&&!t&&N(e))}},floating:{"aria-orientation":"both"===b?void 0:b,...h&&{"aria-activedescendant":D},onKeyDown:N,onPointerMove(){R.current=!1}},item:{onClick:e=>{let{currentTarget:n}=e;return n.focus({preventScroll:!0})},...w&&{onPointerMove(e){let{currentTarget:n}=e;const t=n;if(t){const e=se(u).indexOf(t);-1!==e&&f(e)}},onPointerLeave(){var e;R.current||(f(null),h||null==(e=o.floating.current)||e.focus({preventScroll:!0}))}}}}:{}},ve=function(e,n){var t;let{open:r,dataRef:o}=e,{listRef:u,activeIndex:i,onMatch:l=(()=>{}),enabled:a=!0,findMatch:f=null,resetMs:s=1e3,ignoreKeys:d=[],selectedIndex:v=null}=void 0===n?{listRef:{current:[]},activeIndex:null}:n;const m=c(),g=c(""),h=c(null!=(t=null!=v?v:i)?t:-1),y=c(null);function w(e){if(!e.currentTarget.contains(M(e.currentTarget).activeElement))return;g.current.length>0&&(o.current.typing=!0," "===e.key&&ne(e));const n=u.current;if(null==n||["Home","End","Escape","Enter","Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight",...d].includes(e.key))return;n.every((e=>{var n,t;return!e||(null==(n=e[0])?void 0:n.toLowerCase())!==(null==(t=e[1])?void 0:t.toLowerCase())}))&&g.current===e.key&&(g.current="",h.current=y.current),g.current+=e.key,clearTimeout(m.current),m.current=setTimeout((()=>{g.current="",h.current=y.current,o.current.typing=!1}),s);const t=h.current,r=[...n.slice((null!=t?t:0)+1),...n.slice(0,(null!=t?t:0)+1)],c=f?f(r,g.current):r.find((e=>0===(null==e?void 0:e.toLowerCase().indexOf(g.current)))),i=c?n.indexOf(c):-1;-1!==i&&(l(i),y.current=i)}return p((()=>{r&&(clearTimeout(m.current),y.current=null,g.current="")}),[r]),p((()=>{var e;r&&""===g.current&&(h.current=null!=(e=null!=v?v:i)?e:-1)}),[r,v,i]),a?{reference:{onKeyDown:w},floating:{onKeyDown:w}}:{}};function me(e){let{open:n=!1,onOpenChange:t=(()=>{}),placement:r,middleware:o,strategy:i,nodeId:a}=void 0===e?{}:e;const f=A(),s=c({}),v=l((()=>h()))[0],m=d({placement:r,middleware:o,strategy:i}),g=u((()=>({...m,dataRef:s,nodeId:a,events:v,open:n,onOpenChange:t})),[m,s,a,v,n,t]);return p((()=>{const e=null==f?void 0:f.nodesRef.current.find((e=>e.id===a));e&&(e.context=g)})),u((()=>({context:g,...m})),[m,g])}export{G as FloatingDelayGroup,O as FloatingNode,X as FloatingOverlay,V as FloatingPortal,C as FloatingTree,K as safePolygon,Z as useClick,J as useDelayGroup,_ as useDelayGroupContext,$ as useDismiss,me as useFloating,k as useFloatingNodeId,T as useFloatingParentNodeId,A as useFloatingTree,ee as useFocus,oe as useFocusTrap,W as useHover,x as useId,P as useInteractions,de as useListNavigation,Q as useRole,ve as useTypeahead};
